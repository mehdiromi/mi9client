<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Mi9client : An example client application to consume the mi9 service - This app is written in Node.js and hosted on Heroku. This repo has a web site (http://mehdiromi.github.io/mi9client/) which is automatically generated from this repo. Please also visit https://github.com/mehdiromi/mi9service">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Mi9client</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/mehdiromi/mi9client">View on GitHub</a>

          <h1 id="project_title">Mi9client</h1>
          <h2 id="project_tagline">An example client application to consume the mi9 service - This app is written in Node.js and hosted on Heroku. This repo has a web site (http://mehdiromi.github.io/mi9client/) which is automatically generated from this repo. Please also visit https://github.com/mehdiromi/mi9service</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/mehdiromi/mi9client/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/mehdiromi/mi9client/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="welcome-to-mi9client" class="anchor" href="#welcome-to-mi9client"><span class="octicon octicon-link"></span></a>Welcome to mi9client</h1>

<h4>
<a name="mi9client-is-an-example-of-client-application-for-mi9service" class="anchor" href="#mi9client-is-an-example-of-client-application-for-mi9service"><span class="octicon octicon-link"></span></a>mi9client is an example of client application for mi9service</h4>

<p>This is an example of consuming the exercise web service developed by Mehdi and hosted at <a href="http://awesomeservice.apphb.com">http://awesomeservice.apphb.com</a>.</p>

<p>The client application is written in Node.js on Express, Jade template and uses JQUERY for Ajax calls and  hosted on Heroku at <a href="http://mi9client.heroku.com">http://mi9client.heroku.com</a>.</p>

<p>The service is originally written in C# with ASP.Net Web Api 5.1.0 and the source code is avaialbe on github in the following repo:
<a href="https://github.com/mehdiromi/mi9service">https://github.com/mehdiromi/mi9service</a></p>

<p>How does this client app work?</p>

<ul>
<li>The initial input data is being read with a GET ajax call from a Node.js api from this service on <a href="http://mi9client.heroku.com/samplerequest">http://mi9client.heroku.com/samplerequest</a> and updates input DOM element.</li>
<li>The input data then is POSTed to the service on <a href="http://awesomeservice.apphb.com">http://awesomeservice.apphb.com</a> via ajax and updates the output DOM element.</li>
<li>If any error occures, the error DOM element gets updates.</li>
</ul><h3>
<a name="javascript-ajax-call-" class="anchor" href="#javascript-ajax-call-"><span class="octicon octicon-link"></span></a>Javascript ajax call :</h3>

<p>On page load, a simple function reads the input data and then POST it to the service.</p>

<pre><code>$(document).ready(function() {
            ReadDataAndPost();
        });

</code></pre>

<p>ReadDataAndPost initially calls <a href="http://mi9client.heroku.com/samplerequest">http://mi9client.heroku.com/samplerequest</a> to GET the input data</p>

<pre><code>function ReadDataAndPost() {
    var sampleInput;
    $.ajax({
        url: "samplerequest",
        type: 'GET',
        //data: JSON.stringify(Data),
        //crossDomain: true,
        async: true,
        cache: false,
        dataType: "json",
        //contentType: "application/json; charset=utf-8",
        success: function (data) {
            sampleInput = data;
            $("#input").html(JSON.stringify(sampleInput));
            //Post Data
            CallService(sampleInput);
        },
        error: function (error) {
            $("#input").html(error.responseText);
        }
    });
}
</code></pre>

<p>When input data ready, then it POSTs to the service at <a href="http://awesomeservice.apphb.com">http://awesomeservice.apphb.com</a>, and displays the returned data:</p>

<pre><code>function CallService(sampleInput) {
    $.ajax({
        url: "http://awesomeservice.apphb.com",
        type: 'POST',            
        data: JSON.stringify(sampleInput),
        async: true,
        cache: false,
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        beforeSend: function () {
        },
        success: function (data) {
            $("#output").html(JSON.stringify(data));
        },
        error: function (error) {
            $("#output").html(error.responseText);
        },
        complete: function () {               
        }
    });
}

</code></pre>

<h3>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h3>

<ol>
<li>
<p>If you are hosting on Heroku, simply clone the repository and follow the instuction below in the command line or bash:</p>

<ul>
<li>heroku create</li>
<li>git init</li>
<li>git add .</li>
<li>git commit -a</li>
<li>git heroku master
and that' it!</li>
</ul>
</li>
<li>
<p>If running locally, </p>

<ul>
<li>Download and install Node.js from <a href="http://nodejs.org/download/">http://nodejs.org/download/</a>
</li>
<li>make sure you have express, stylus, jade install  or use nmp install.</li>
<li>run node app.js</li>
</ul>
</li>
</ol><h3>
<a name="nodejs-app" class="anchor" href="#nodejs-app"><span class="octicon octicon-link"></span></a>Node.js App</h3>

<p>code in app.js is as follow; there are 2 routes to root and samplerequest</p>

<pre><code>app.get('/', routes.index);
app.get('/samplerequest', samplerequest.samplerequest);

http.createServer(app).listen(app.get('port'), function(){
  console.log('Express server listening on port ' + app.get('port'));
});
</code></pre>

<p>index route, returns an html view in jade:</p>

<pre><code>exports.index = function (req, res) {
    res.render('index', {
        title: 'Sample Node.js Express with JQUERY ajax call.'
    });
};
</code></pre>

<p>the index view code is as follow:</p>

<pre><code>extends layout
block content  
    p Welcome to #{title}
    p This is an example of web service call to http://awesomeservice.apphb.com with sample input data from the mi9 exercise
    p This application is hosted on http://mi9client.heroku.com, written with Node.js on Express and Jade template and uses JQUERY for Ajax calls.
    p How does it work?
    p The initial input data is being read with a GET ajax call from a Node.js api from this service on http://mi9client.heroku.com/samplerequest and updates input DOM element.
    p The input data then is POSTed to the service on http://awesomeservice.apphb.com via ajax and updates the output DOM element.
    p If any error occures, the error DOM element gets updates.    
    div.input
        p Raw input read from ...
        p#input
    div.output
        p Output from  service
        p#output
    div.error
        p Error Messages
        p.error No Error
    div
        p.copyright This application is written by Mehdi Romi (mehdi.romi@gmail.com) and uses free resources for development and hosting.
    script.
        $(document).ready(function() {
            ReadDataAndPost();
        });
</code></pre>

<p>application layout looks like the following:</p>

<pre><code>doctype html5
html
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
    script(src='http://code.jquery.com/jquery-1.8.1.js')
    script(type='text/javascript', src='/javascripts/ajaxcall.js')
  body
    block content
</code></pre>

<p>samplerequest route simply returns a sample JSON request object</p>

<pre><code>exports.samplerequest = function (req, res) {
    res.json({
        "payload": [
        {
            "country": "UK",
            "description": "What's life like when you have enough children to field your own football team?",
            "drm": true,
            "episodeCount": 3,
            "genre": "Reality",
            "image": {
                "showImage": "http://catchup.ninemsn.com.au/img/jump-in/shows/16KidsandCounting1280.jpg"
            },
            "language": "English",
            "nextEpisode": null,
            "primaryColour": "#ff7800",
            "seasons": [
                {
                "slug": "show/16kidsandcounting/season/1"
            }
            ],
            "slug": "show/16kidsandcounting",
            "title": "16 Kids and Counting",
            "tvChannel": "GEM"
        },
        {
            "slug": "show/seapatrol",
            "title": "Sea Patrol",
            "tvChannel": "Channel 9"
        },
        {
            "country": " USA",
            "description": "The Taste puts 16 culinary competitors in the kitchen, where four of the World's most notable culinary masters of the food world judges their creations based on a blind taste. Join judges Anthony Bourdain, Nigella Lawson, Ludovic Lefebvre and Brian Malarkey in this pressure-packed contest where a single spoonful can catapult a contender to the top or send them packing.",
            "drm": true,
            "episodeCount": 2,
            "genre": "Reality",
            "image": {
                "showImage": "http://catchup.ninemsn.com.au/img/jump-in/shows/TheTaste1280.jpg"
            },
            "language": "English",
            "nextEpisode": {
                "channel": null,
                "channelLogo": "http://catchup.ninemsn.com.au/img/player/logo_go.gif",
                "date": null,
                "html": "&lt;br&gt;&lt;span class=\"visit\"&gt;Visit the Official Website&lt;/span&gt;&lt;/span&gt;",
                "url": "http://go.ninemsn.com.au/"
            },
            "primaryColour": "#df0000",
            "seasons": [
                {
                "slug": "show/thetaste/season/1"
            }
            ],
            "slug": "show/thetaste",
            "title": "The Taste",
            "tvChannel": "GEM"
        },
        {
            "country": "UK",
            "description": "The series follows the adventures of International Rescue, an organisation created to help those in grave danger using technically advanced equipment and machinery. The series focuses on the head of the organisation, ex-astronaut Jeff Tracy, and his five sons who piloted the \"Thunderbird\" machines.",
            "drm": true,
            "episodeCount": 24,
            "genre": "Action",
            "image": {
                "showImage": "http://catchup.ninemsn.com.au/img/jump-in/shows/Thunderbirds_1280.jpg"
            },
            "language": "English",
            "nextEpisode": null,
            "primaryColour": "#0084da",
            "seasons": [
                {
                "slug": "show/thunderbirds/season/1"
            },
                {
                "slug": "show/thunderbirds/season/3"
            },
                {
                "slug": "show/thunderbirds/season/4"
            },
                {
                "slug": "show/thunderbirds/season/5"
            },
                {
                "slug": "show/thunderbirds/season/6"
            },
                {
                "slug": "show/thunderbirds/season/8"
            }
            ],
            "slug": "show/thunderbirds",
            "title": "Thunderbirds",
            "tvChannel": "Channel 9"
        },
        {
            "country": "USA",
            "description": "A sleepy little village, Crystal Cove boasts a long history of ghost sightings, poltergeists, demon possessions, phantoms and other paranormal occurrences. The renowned sleuthing team of Fred, Daphne, Velma, Shaggy and Scooby-Doo prove all of this simply isn't real, and along the way, uncover a larger, season-long mystery that will change everything.",
            "drm": true,
            "episodeCount": 4,
            "genre": "Kids",
            "image": {
                "showImage": "http://catchup.ninemsn.com.au/img/jump-in/shows/ScoobyDoo1280.jpg"
            },
            "language": "English",
            "nextEpisode": null,
            "primaryColour": "#1b9e00",
            "seasons": [
                {
                "slug": "show/scoobydoomysteryincorporated/season/1"
            }
            ],
            "slug": "show/scoobydoomysteryincorporated",
            "title": "Scooby-Doo! Mystery Incorporated",
            "tvChannel": "GO!"
        },
        {
            "country": "USA",
            "description": "Toy Hunter follows toy and collectibles expert and dealer Jordan Hembrough as he scours the U.S. for hidden treasures to sell to buyers around the world. In each episode, he travels from city to city, strategically manoeuvring around reluctant sellers, abating budgets, and avoiding unforeseen roadblocks.",
            "drm": true,
            "episodeCount": 2,
            "genre": "Reality",
            "image": {
                "showImage": "http://catchup.ninemsn.com.au/img/jump-in/shows/ToyHunter1280.jpg"
            },
            "language": "English",
            "nextEpisode": null,
            "primaryColour": "#0084da",
            "seasons": [
                {
                "slug": "show/toyhunter/season/1"
            }
            ],
            "slug": "show/toyhunter",
            "title": "Toy Hunter",
            "tvChannel": "GO!"
        },
        {
            "country": "AUS",
            "description": "A series of documentary specials featuring some of the world's most frightening moments, greatest daredevils and craziest weddings.",
            "drm": true,
            "episodeCount": 1,
            "genre": "Documentary",
            "image": {
                "showImage": "http://catchup.ninemsn.com.au/img/jump-in/shows/Worlds1280.jpg"
            },
            "language": "English",
            "nextEpisode": null,
            "primaryColour": "#ff7800",
            "seasons": [
                {
                "slug": "show/worlds/season/1"
            }
            ],
            "slug": "show/worlds",
            "title": "World's...",
            "tvChannel": "Channel 9"
        },
        {
            "country": "USA",
            "description": "Another year of bachelorhood brought many new adventures for roommates Walden Schmidt and Alan Harper. After his girlfriend turned down his marriage proposal, Walden was thrown back into the dating world in a serious way. The guys may have thought things were going to slow down once Jake got transferred to Japan, but they're about to be proven wrong when a niece of Alan's, who shares more than a few characteristics with her father, shows up at the beach house.",
            "drm": true,
            "episodeCount": 0,
            "genre": "Comedy",
            "image": {
                "showImage": "http://catchup.ninemsn.com.au/img/jump-in/shows/TwoandahHalfMen_V2.jpg"
            },
            "language": "English",
            "nextEpisode": {
                "channel": null,
                "channelLogo": "http://catchup.ninemsn.com.au/img/player/Ch9_new_logo.gif",
                "date": null,
                "html": "Next episode airs: &lt;span&gt; 10:00pm Monday on&lt;br&gt;&lt;span class=\"visit\"&gt;Visit the Official Website&lt;/span&gt;&lt;/span&gt;",
                "url": "http://channelnine.ninemsn.com.au/twoandahalfmen/"
            },
            "primaryColour": "#ff7800",
            "seasons": null,
            "slug": "show/twoandahalfmen",
            "title": "Two and a Half Men",
            "tvChannel": "Channel 9"
        },
        {
            "country": "USA",
            "description": "Simmering with supernatural elements and featuring familiar and fan-favourite characters from the immensely popular drama The Vampire Diaries, it's The Originals. This sexy new series centres on the Original vampire family and the dangerous vampire/werewolf hybrid, Klaus, who returns to the magical melting pot that is the French Quarter of New Orleans, a town he helped build centuries ago.",
            "drm": true,
            "episodeCount": 1,
            "genre": "Action",
            "image": {
                "showImage": "http://catchup.ninemsn.com.au/img/jump-in/shows/TheOriginals1280.jpg"
            },
            "language": "English",
            "nextEpisode": {
                "channel": null,
                "channelLogo": "http://catchup.ninemsn.com.au/img/player/logo_go.gif",
                "date": null,
                "html": "&lt;br&gt;&lt;span class=\"visit\"&gt;Visit the Official Website&lt;/span&gt;&lt;/span&gt;",
                "url": "http://go.ninemsn.com.au/"
            },
            "primaryColour": "#df0000",
            "seasons": [
                {
                "slug": "show/theoriginals/season/1"
            }
            ],
            "slug": "show/theoriginals",
            "title": "The Originals",
            "tvChannel": "GO!"
        },
        {
            "country": "AUS",
            "description": "Join the most dynamic TV judging panel Australia has ever seen as they uncover the next breed of superstars every Sunday night. UK comedy royalty Dawn French, international pop superstar Geri Halliwell, (in) famous Aussie straight-talking radio jock Kyle Sandilands, and chart -topping former AGT alumni Timomatic.",
            "drm": false,
            "episodeCount": 0,
            "genre": "Reality",
            "image": {
                "showImage": "http://catchup.ninemsn.com.au/img/jump-in/shows/AGT.jpg"
            },
            "language": "English",
            "nextEpisode": {
                "channel": null,
                "channelLogo": "http://catchup.ninemsn.com.au/img/player/Ch9_new_logo.gif",
                "date": null,
                "html": "Next episode airs:&lt;span&gt;6:30pm Sunday on&lt;br&gt;&lt;span class=\"visit\"&gt;Visit the Official Website&lt;/span&gt;&lt;/span&gt;",
                "url": "http://agt.ninemsn.com.au"
            },
            "primaryColour": "#df0000",
            "seasons": null,
            "slug": "show/australiasgottalent",
            "title": "Australia's Got Talent",
            "tvChannel": "Channel 9"
        }
    ],
        "skip": 0,
        "take": 10,
        "totalRecords": 75
    });
};
</code></pre>

<p>Thank you for reading this document.</p>

<p>This application is written by Mehdi Romi (<a href="mailto:mehdi.romi@gmail.com">mehdi.romi@gmail.com</a>) and uses free resources for development and hosting.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Mi9client maintained by <a href="https://github.com/mehdiromi">mehdiromi</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
